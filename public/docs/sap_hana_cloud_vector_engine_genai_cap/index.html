<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Leveraging SAP HANA Cloud Vector Engine for GenAI and CAP | Fayaz Mammoo</title>
<meta name="keywords" content="">
<meta name="description" content="In the ever-evolving landscape of technology, SAP continues to push the boundaries with innovative solutions. The recent integration of the SAP HANA Cloud Vector Engine with GenAI and CAP (Cloud Application Programming) offers a robust framework for building intelligent applications. This blog delves into how you can harness these technologies to drive business value.
Understanding the SAP HANA Cloud Vector Engine The SAP HANA Cloud Vector Engine is designed to handle high-dimensional vector data efficiently.">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/docs/sap_hana_cloud_vector_engine_genai_cap/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css" integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z&#43;V9&#43;cO1A=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/docs/sap_hana_cloud_vector_engine_genai_cap/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Fayaz Mammoo (Alt + H)">Fayaz Mammoo</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Leveraging SAP HANA Cloud Vector Engine for GenAI and CAP
    </h1>
    <div class="post-meta"><span title='2024-05-28 12:00:00 +0000 UTC'>May 28, 2024</span>

</div>
  </header> 
  <div class="post-content"><p>In the ever-evolving landscape of technology, SAP continues to push the boundaries with innovative solutions. The recent integration of the SAP HANA Cloud Vector Engine with GenAI and CAP (Cloud Application Programming) offers a robust framework for building intelligent applications. This blog delves into how you can harness these technologies to drive business value.</p>
<h2 id="understanding-the-sap-hana-cloud-vector-engine">Understanding the SAP HANA Cloud Vector Engine<a hidden class="anchor" aria-hidden="true" href="#understanding-the-sap-hana-cloud-vector-engine">#</a></h2>
<p>The SAP HANA Cloud Vector Engine is designed to handle high-dimensional vector data efficiently. This capability is crucial for applications involving machine learning, artificial intelligence, and data analytics. With the Vector Engine, you can perform operations such as similarity searches, which are essential for GenAI applications.</p>
<h2 id="integrating-genai-with-cap">Integrating GenAI with CAP<a hidden class="anchor" aria-hidden="true" href="#integrating-genai-with-cap">#</a></h2>
<p>SAP&rsquo;s Cloud Application Programming model (CAP) provides a powerful environment for developing enterprise-grade applications. Integrating GenAI into CAP allows developers to build intelligent applications that can process and analyze vast amounts of data in real-time.</p>
<h3 id="key-components-of-the-integration">Key Components of the Integration<a hidden class="anchor" aria-hidden="true" href="#key-components-of-the-integration">#</a></h3>
<ol>
<li><strong>SAP HANA Cloud</strong>: Provides the database and vector engine capabilities.</li>
<li><strong>CAP</strong>: Offers a structured framework for application development.</li>
<li><strong>GenAI</strong>: Powers the intelligence and learning capabilities.</li>
</ol>
<h2 id="step-by-step-implementation">Step-by-Step Implementation<a hidden class="anchor" aria-hidden="true" href="#step-by-step-implementation">#</a></h2>
<p>Let’s walk through a sample implementation that demonstrates the integration of SAP HANA Cloud Vector Engine with GenAI and CAP.</p>
<h3 id="1-setting-up-your-environment">1. Setting Up Your Environment<a hidden class="anchor" aria-hidden="true" href="#1-setting-up-your-environment">#</a></h3>
<p>Ensure you have the necessary environment set up with SAP HANA Cloud and CAP. You will also need access to GenAI services.</p>
<h3 id="2-define-your-data-model-in-cap">2. Define Your Data Model in CAP<a hidden class="anchor" aria-hidden="true" href="#2-define-your-data-model-in-cap">#</a></h3>
<p>Create a data model that includes entities capable of storing vector data.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// Define your data model
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">namespace</span> <span style="color:#a6e22e">my</span>.<span style="color:#a6e22e">genai</span>.<span style="color:#a6e22e">app</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">entity</span> <span style="color:#a6e22e">TextEmbeddings</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">key</span> <span style="color:#a6e22e">ID</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">UUID</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">text</span> <span style="color:#f92672">:</span> String;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">embedding</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">LargeBinary</span>; <span style="color:#75715e">// Store the vector representation
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><h3 id="3-import-and-process-data">3. Import and Process Data<a hidden class="anchor" aria-hidden="true" href="#3-import-and-process-data">#</a></h3>
<p>Load your data into the SAP HANA Cloud and process it to generate vector embeddings using GenAI.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">cds</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;@sap/cds&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">TextEmbeddings</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">cds</span>.<span style="color:#a6e22e">entities</span>(<span style="color:#e6db74">&#39;my.genai.app&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">genAI</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;./genai&#39;</span>); <span style="color:#75715e">// Assume a module for GenAI interactions
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">generateEmbeddings</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">texts</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">SELECT</span>.<span style="color:#a6e22e">from</span>(<span style="color:#a6e22e">TextEmbeddings</span>).<span style="color:#a6e22e">columns</span>(<span style="color:#e6db74">&#39;ID&#39;</span>, <span style="color:#e6db74">&#39;text&#39;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">text</span> <span style="color:#66d9ef">of</span> <span style="color:#a6e22e">texts</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">embedding</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">genAI</span>.<span style="color:#a6e22e">generateEmbedding</span>(<span style="color:#a6e22e">text</span>.<span style="color:#a6e22e">text</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">UPDATE</span>(<span style="color:#a6e22e">TextEmbeddings</span>).<span style="color:#a6e22e">set</span>({ <span style="color:#a6e22e">embedding</span> }).<span style="color:#a6e22e">where</span>({ <span style="color:#a6e22e">ID</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">text</span>.<span style="color:#a6e22e">ID</span> });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">generateEmbeddings</span>();
</span></span></code></pre></div><h3 id="4-implementing-similarity-search">4. Implementing Similarity Search<a hidden class="anchor" aria-hidden="true" href="#4-implementing-similarity-search">#</a></h3>
<p>Utilize the vector engine’s capabilities to perform similarity searches.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">hana</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;@sap/hana-client&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">findSimilarEmbeddings</span>(<span style="color:#a6e22e">targetEmbedding</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">client</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">hana</span>.<span style="color:#a6e22e">createConnection</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">client</span>.<span style="color:#a6e22e">connect</span>({
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">serverNode</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;your_server_node&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">uid</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;your_user&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">pwd</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;your_password&#39;</span>
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">query</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        SELECT ID, text
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        FROM TextEmbeddings
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        ORDER BY embedding &lt;=&gt; ?
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        LIMIT 10
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    `</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">client</span>.<span style="color:#a6e22e">execute</span>(<span style="color:#a6e22e">query</span>, [<span style="color:#a6e22e">targetEmbedding</span>]);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">result</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">findSimilarEmbeddings</span>(<span style="color:#a6e22e">someEmbedding</span>).<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>);
</span></span></code></pre></div><h2 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h2>
<p>Integrating SAP HANA Cloud Vector Engine with GenAI and CAP opens up a world of possibilities for building intelligent applications. By leveraging these technologies, businesses can gain deeper insights from their data and enhance their decision-making processes. Start exploring the potential of this powerful integration today and unlock new dimensions of innovation.</p>
<hr>
<p>This blog post is inspired by the detailed insights provided by the SAP Community. For further details and advanced use cases, refer to the original blog post on the <a href="https://community.sap.com/t5/technology-blogs-by-sap/rag-with-sap-hana-cloud-vector-engine-genai-hub-amp-cap/ba-p/13700459">SAP Community</a>.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="http://localhost:1313/">Fayaz Mammoo</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
